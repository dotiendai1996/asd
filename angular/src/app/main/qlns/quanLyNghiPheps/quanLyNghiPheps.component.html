<div [@routerTransition]>
    <div class="kt-content  kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor">
        <div class="kt-subheader kt-grid__item">
            <div [class]="containerClass">
                <div class="kt-subheader__main">
                    <div class="col-xl-12" style="padding: 4px 17px 4px 1px;  background-color: #248cbf ;
                color: white;">
                        <dx-button text="Thêm mới" stylingMode="text" type="default" icon="fa fa-plus"
                            (onClick)="createQuanLyNghiPheps()"> </dx-button>
                        &nbsp;
                        <dx-button text="Chỉnh sửa" stylingMode="text" type="default" icon="rename" [disabled]="a"
                            (onClick)="editQuanLyNghiPheps()"> </dx-button>
                        &nbsp;
                        <dx-button text="Xóa" stylingMode="text" type="default" icon="clear" [disabled]="a"
                            (onClick)="deleteQuanLyNghiPhep()">
                        </dx-button>
                        &nbsp;

                        <dx-button text="Xem chi tiết" stylingMode="text" type="default" icon="menu" [disabled]="a"
                            (onClick)="viewDetailUngVien()"></dx-button>
                        &nbsp;


                        <dx-button text="Tìm kiếm" stylingMode="text" type="default" icon="fa fa-search"
                            (onClick)="searchQuanLyNghiPheps()">
                        </dx-button>
                        <!--
                    &nbsp;
                    <dx-button text="Tải mẫu Import" *ngIf="permission.isGranted('Pages.UngViens.Export')" type="success" icon="exportpdf" (onClick)="dowloadTemplate()">
                    </dx-button> -->
                    </div>

                </div>


            </div>
        </div>
        <div [class]="containerClass + ' kt-grid__item kt-grid__item--fluid'">
            <div class="kt-portlet kt-portlet--mobile">
                <div class="kt-portlet__body">

                    <h3 class="kt-subheader__title">
                        <span style="font-family: Arial, Helvetica, sans-serif;
                    font-size: 76%;
                    font-weight: bold;
                    color: #246faf;"> <i class="fas fa-home"></i> {{l("Trang chủ")}} |
                            {{l("Danh sách phiếu nghỉ phép")}} </span>
                    </h3>
                    <br>
                    <div class="row">
                        <div class="col">

                        </div>
                        <div class="col-md-auto">


                            <dx-button stylingMode="contained" icon="pulldown" text="Làm mới" type="default"
                                [width]="140" (onClick)="lamtuoi()">
                            </dx-button>

                        </div>

                    </div>
                    <br>
                    <form class="kt-form" autocomplete="off">
                        <div>
                            <div class="row align-items-center">
                                <div class="col-xl-12">
                                    <div class="form-group m-form__group align-items-center">
                                        <div class="input-group">
                                            <input [(ngModel)]="filterText" name="filterText" autoFocus
                                                class="form-control m-input" [placeholder]="l('Nhập nội dung...')"
                                                type="text">

                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <!-- <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="MaNVFilter">{{l("Mã nhân viên")}}</label>
                                        <input type="text" class="form-control" id="MaNVFilter" name="maNVFilter"
                                            [(ngModel)]="maNVFilter">
                                    </div>
                                </div> -->
                                <div class="col-md-3">
                                    <label for="NghiPhepFilterSelect">{{l("Nghỉ phép")}}</label>
                                    <select class="form-control" name="NghiPhepFilter" id="NghiPhepFilterSelect"
                                        [(ngModel)]="nghiPhepFilter">
                                        <option value="-1">{{l("--Tất cả--")}}</option>
                                        <option value="0">{{l("không")}}</option>
                                        <option value="1">{{l("Có")}}</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="CongTacFilter">{{l("Công tác")}}</label>
                                        <select class="form-control" name="CongTacFilter" id="CongTacFilterSelect"
                                            [(ngModel)]="congTacFilter">
                                            <option value="-1">{{l("--Tất cả--")}}</option>
                                            <option value="0">{{l("không")}}</option>
                                            <option value="1">{{l("Có")}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="form-group">
                                        <label for="TangCaFilter">{{l("Tăng ca")}}</label>
                                        <select class="form-control" name="TangCaFilter" id="TangCaFilterSelect"
                                            [(ngModel)]="tangCaFilter">
                                            <option value="-1">{{l("--Tất cả--")}}</option>
                                            <option value="0">{{l("không")}}</option>
                                            <option value="1">{{l("Có")}}</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-3"  	>
                                    <div class="form-group">
                                        <label for="trangThaiIDFilter">{{l("Trạng thái")}}</label>
                                        <select class="form-control" name="trangThaiIDFilter" id="trangThaiIDFilterSelect"
                                            [(ngModel)]="trangThaiIDFilter">
                                            <option value="4742">{{l("Đã duyệt")}}</option>
                                            <option value="4743">{{l("Chưa duyệt")}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </form>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="startDateFilter">{{l("Từ ngày")}}</label>
                                <dx-date-box displayFormat="d/M/yyyy" [value]="startDateFilter" type="date"
                                    [(ngModel)]="startDateFilter">

                                </dx-date-box>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="endDateFilter">{{l("Đến ngày")}}</label>
                                <dx-date-box displayFormat="d/M/yyyy" [value]="endDateFilter" type="date"
                                    [(ngModel)]="endDateFilter">

                                </dx-date-box>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="lastModificationTimeFilter"></label>
                                <div class="checkbox">
                                    <dx-check-box text="Ngày cập nhật" [value]="isCheckTimeFilter"
                                        [(ngModel)]="isCheckTimeFilter">

                                    </dx-check-box>
                                </div>
                            </div>
                        </div>

                    </div>


                     <div class="row align-items-center">
                        <div class="primeng-datatable-container col-12" [busyIf]="primengTableHelper.isLoading">
                            <p-table #dataTable (onLazyLoad)="getQuanLyNghiPheps($event)" [value]="primengTableHelper.records"
                                rows="{{primengTableHelper.defaultRecordsCountPerPage}}" [paginator]="false"
                                [lazy]="false" [scrollable]="true" ScrollWidth="100%"
                                [responsive]="primengTableHelper.isResponsive"
                                [resizableColumns]="primengTableHelper.resizableColumns">
                                <ng-template pTemplate="header" >
                                    <tr>
                                        <th style="width: 70px">
                                            {{l('STT')}}</th>

                                        <th style="width: 200px" >
                                            {{l('Mã nhân viên')}}

                                        </th>
                                        <th style="width: 200px">
                                            {{l('Họ và tên')}}

                                        </th>
                                        <th style="width: 200px">
                                            {{l('Tên công ty')}}
                                        </th>
                                        <th style="width: 250px">
                                            {{l('Phòng ban')}}
                                        </th>
                                        <th style="width: 100px">
                                            {{l('Trạng thái')}}
                                        </th>
                                        <th style="width: 150px">
                                            {{l('Ngày bắt đầu')}}
                                        </th>
                                        <th style="width: 150px">
                                            {{l('Ngày kết thúc')}}
                                        </th>
                                        <th style="width: 200px" >
                                            {{l('Ngày cập nhật')}}

                                        </th>
                                        <!-- <th style="width: 200px">
                                            {{l('Quản lý trực tiếp')}}
                                        </th> -->
                                        <th style="width: 200px">
                                            {{l('Trưởng bộ phận')}}
                                        </th>

                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body"  let-record="$implicit">
                                    <tr [ngClass] = "{'highlighted' : record.hoSo.id == selectedName}" (click)="startEdit(record.hoSo.id)" style="white-space: nowrap;" >

                                        <td style="width: 70px">
                                            <span class="ui-column-title">{{l('STT')}}</span>
                                            {{record.stt}}
                                        </td>

                                        <td style="width: 200px">
                                            <span class="ui-column-title"> {{l('Mã ứng viên')}}</span>
                                            {{record.quanLyNghiPhep.maNV}}
                                        </td>
                                        <td style="width: 200px">
                                            <span class="ui-column-title"> {{l('Họ và tên')}}</span>
                                            {{record.quanLyNghiPhep.tenNhanVien}}
                                        </td>
                                        <td style="width: 200px">
                                            <span class="ui-column-title"> {{l('Tên công ty')}}</span>
                                            {{record.quanLyNghiPhep.tenCTY}}
                                        </td>
                                        <td style="width: 250px">
                                            <span class="ui-column-title"> {{l('Phòng ban')}}</span>
                                            {{record.donViCongTacValue}}
                                        </td>
                                        <td style="width: 100px">
                                            <span class="ui-column-title"> {{l('Trạng thái')}}</span>
                                            {{record.trangThaiValue}}
                                        </td>
                                        <td style="width: 150px">
                                            <span class="ui-column-title"> {{l('Ngày bắt đầu')}}</span>
                                            {{record.quanLyNghiPhep.ngayBatDau  | date: 'dd/MM/yyyy '}}
                                        </td>
                                        <td style="width: 150px">
                                            <span class="ui-column-title"> {{l('Ngày kết thúc')}}</span>
                                            {{record.quanLyNghiPhep.ngayKetThuc| date: 'dd/MM/yyyy ' }}
                                        </td>
                                        <td style="width: 200px">
                                            <span class="ui-column-title"> {{l('Ngày cập nhật')}}</span>
                                            {{record.quanLyNghiPhep.lastModificationTime | date: 'dd/MM/yyyy'}}
                                        </td>
                                        <!-- <td style="width: 200px">
                                            <span class="ui-column-title"> {{l('Quản lý trực tiếp')}}</span>
                                            {{record.quanLyTrucTiepValue}}
                                        </td> -->

                                        <td style="width: 200px">
                                            <span class="ui-column-title"> {{l('Trưởng bộ phận')}}</span>
                                            {{record.truongBoPhanValue}}
                                        </td>

                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="emptymessage">
                                    <tr>
                                        <td style="width: 2048px" colspan="100">{{l('NoData')}}</td>
                                    </tr>
                                </ng-template>
                            </p-table>
                            <div class="primeng-paging-container">
                                <p-paginator [rows]="primengTableHelper.defaultRecordsCountPerPage" #paginator
                                    (onPageChange)="getQuanLyNghiPheps($event)"
                                    [totalRecords]="primengTableHelper.totalRecordsCount"
                                    [rowsPerPageOptions]="primengTableHelper.predefinedRecordsCountPerPage">
                                </p-paginator>
                                <span class="total-records-count">
                                    {{l('TotalRecordsCount', primengTableHelper.totalRecordsCount)}}
                                </span>
                            </div>
                        </div>
                    </div>






                </div>
            </div>
        </div>



    </div>
</div>
<style>
    tr.highlighted {
        background-color: #639bb7 !important;
        color: #ffffff !important;
    }
    tr:hover {
        background-color: #639bb7 !important;
        color: #ffffff !important;
    }
    .dx-button-mode-text.dx-button-default {

        color: #ffffff !important;
    }

    .dx-button-mode-text.dx-button-default .dx-icon {
        color: #f3f6f9 !important;
    }

    .checkbox {
        padding: 10px 0px;
    }

</style>
