USE gAMSPo_ABBank
GO

ALTER PROCEDURE dbo.ASS_TYPE_Search @p_TYPE_ID VARCHAR(15) = NULL,
@p_TYPE_CODE VARCHAR(15) = NULL,
@p_TYPE_NAME NVARCHAR(200) = NULL,
@p_NOTES NVARCHAR(1000) = NULL,
@p_RECORD_STATUS VARCHAR(1) = NULL,
@p_MAKER_ID VARCHAR(12) = NULL,
@p_CREATE_DT VARCHAR(20) = NULL,
@p_AUTH_STATUS VARCHAR(50) = NULL,
@p_CHECKER_ID VARCHAR(12) = NULL,
@p_APPROVE_DT VARCHAR(20) = NULL,
@p_MaxResultCount INT = NULL,
@p_SkipCount INT = NULL,
@p_Sorting VARCHAR(100) = NULL,
@p_TotalCount INT = NULL

AS
BEGIN -- PAGING
  -- PAGING BEGIN
  SELECT
    A.*
   ,B.AUTH_STATUS_NAME
   ,C.CONTENT AS RECORD_STATUS_NAME
  -- SELECT END
  FROM ASS_TYPE A
  LEFT JOIN CM_AUTH_STATUS B
    ON A.AUTH_STATUS = B.AUTH_STATUS
  LEFT JOIN CM_ALLCODE C
    ON C.CDNAME = 'RECORD_STATUS'
      AND C.CDVAL = A.RECORD_STATUS
  WHERE (@p_TYPE_ID IS NULL
  OR @p_TYPE_ID = ''
  OR A.TYPE_ID = @p_TYPE_ID)
  AND (@p_TYPE_CODE IS NULL
  OR @p_TYPE_CODE = ''
  OR A.TYPE_CODE LIKE '%' + @p_TYPE_CODE + '%')
  AND (@p_TYPE_NAME IS NULL
  OR @p_TYPE_NAME = ''
  OR A.TYPE_NAME LIKE '%' + @p_TYPE_NAME + '%')
  AND (@p_NOTES IS NULL
  OR @p_NOTES = ''
  OR A.NOTES = @p_NOTES)
  AND (@p_RECORD_STATUS IS NULL
  OR @p_RECORD_STATUS = ''
  OR A.RECORD_STATUS = @p_RECORD_STATUS)
  AND (@p_MAKER_ID IS NULL
  OR @p_MAKER_ID = ''
  OR A.MAKER_ID = @p_MAKER_ID)
  AND (@p_CREATE_DT IS NULL
  OR DATEDIFF(DAYOFYEAR, A.CREATE_DT, CONVERT(DATETIME, @p_CREATE_DT, 103)) = 0)
  AND (@p_AUTH_STATUS IS NULL
  OR @p_AUTH_STATUS = ''
  OR A.AUTH_STATUS = @p_AUTH_STATUS)
  AND (@p_CHECKER_ID IS NULL
  OR @p_CHECKER_ID = ''
  OR A.CHECKER_ID = @p_CHECKER_ID)
  AND (@p_APPROVE_DT IS NULL
  OR DATEDIFF(DAYOFYEAR, A.APPROVE_DT, CONVERT(DATETIME, @p_APPROVE_DT, 103)) = 0)
-- PAGING END
END -- PAGING
GO